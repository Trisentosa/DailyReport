<% layout('./layouts/boilerplate') %>
    <div class="card text-center mb-3 bg-secondary">
        <%- include('./partials/navbar') %> 
        <div class="card-body bg-dark">
        <div id="news" class="carousel slide" data-ride="carousel">
            <div class="card-deck d-flex flex-column mb-3">
                <div class="card-title">
                    <h3 class="text-white text-capitalize text-center mb-2">
                        Headline News in <%= countryName  %> 
                    </h3>
                </div>
                <div class="carousel-inner">
                    <% if(headlines.length <1){%>
                        <div class="card bg-secondary border mb-3">
                            <h4 class="text-white text-center m-2">
                                Sorry, We couldn't retrieve or didn't have access to news from <%= countryName %>
                            </h4>
                        </div>
        
                        <% } %>
                            <% headlines.forEach((data,i)=>{ %>

                                <div class="carousel-item <%= i === 0 ? 'active' : '' %>">
                                    <div class="card-group">
                                        <div class="card bg-secondary border mb-3">
                                            <div class="card-body mx-auto">
                                                <div class="card-title ">
                                                    <h5 class="card-text align-self-middle text-white">
                                                        <%= data.title %>
                                                    </h5>
                                                    <h6 class="card-text font-italic">
                                                        Published at <%= data.publishedAt.replace('T', ' '
                                                            ).replace('Z', ' ' )%>
                                                            <%= data.author?`,by ${data.author}`:'' %>
                                                    </h6>
                                                </div>
                                                <img src="<%= data.urlToImage %>" class="card-img-top mx-auto"
                                                    alt="no image available..."
                                                    style="background-color: rgb(205, 237, 252);">
                                                <div class="card-body">
                                                    <p class="card-text align-self-middle text-white text-capitalize">
                                                        <%= data.description %>
                                                    </p>
                                                    <a href="<%= data.url %>" target="_blank" class="btn btn-success">
                                                        Read full</a>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <a class="carousel-control-prev" href="#news" role="button" data-slide="prev">
                                    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                                    <span class="sr-only">Previous</span>
                                </a>
                                <a class="carousel-control-next" href="#news" role="button" data-slide="next">
                                    <span class="carousel-control-next-icon" aria-hidden="true"></span>
                                    <span class="sr-only">Next</span>
                                </a>
                                <% }) %>                
                    </div>
                <div id="categories" class="carousel slide" data-ride="carousel">
                <div class="card-title">
                    <h3 class="text-white text-capitalize text-center mb-2">
                        Your pick: <%=categoryInput %> 
                    </h3>
                </div>
                <% if(categories){ %> 
                <div class="carousel-inner">
                    <% if(categories.length <1){%>
                        <div class="card bg-secondary border mb-3">
                            <h4 class="text-white text-center m-2">
                                Sorry, We couldn't find anything related to <%=categoryInput %>
                            </h4>
                        </div>
                        <% } %>
                            <% categories.forEach((data,i)=>{ %>

                                <div class="carousel-item <%= i === 0 ? 'active' : '' %>">
                                    <div class="card-group">
                                        <div class="card bg-secondary border mb-3">
                                            <div class="card-body mx-auto">
                                                <div class="card-title ">
                                                    <h5 class="card-text align-self-middle text-white">
                                                        <%= data.title %>
                                                    </h5>
                                                    <h6 class="card-text font-italic">
                                                        Published at <%= data.publishedAt.replace('T', ' '
                                                            ).replace('Z', ' ' )%>
                                                            <%= data.author?`,by ${data.author}`:'' %>
                                                    </h6>
                                                </div>
                                                <img src="<%= data.urlToImage %>" class="card-img-top mx-auto"
                                                    alt="no image available..."
                                                    style="background-color: rgb(205, 237, 252);">
                                                <div class="card-body">
                                                    <p class="card-text align-self-middle text-white text-capitalize">
                                                        <%= data.description %>
                                                    </p>
                                                    <a href="<%= data.url %>" target="_blank" class="btn btn-success">
                                                        Read full</a>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <% }) %>
                                <a class="carousel-control-prev" href="#categories" role="button" data-slide="prev">
                                    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                                    <span class="sr-only">Previous</span>
                                </a>
                                <a class="carousel-control-next" href="#categories" role="button" data-slide="next">
                                    <span class="carousel-control-next-icon" aria-hidden="true"></span>
                                    <span class="sr-only">Next</span>
                                </a>
                    </div>
                    <% } %> 
                </div>
        
            